<div class="container-fluid p-5">
  <div>
    <h5 class="font-semibold text-center">PRODUCTOS</h5>
    <hr />
  </div>
  <div class="flex flex-row mt-3">
    <!-- Formulario -->
    <div class="w-full">
      <form [formGroup]="form" class="flex flex-wrap">

        <mat-form-field class="w-full md:w-1/6">
          <mat-label>Categoría</mat-label>
          <mat-select formControlName="categoria" (valueChange)="onClickBuscar($event)">
            <mat-option [value]="0">Todos</mat-option>
            <mat-option *ngFor="let item of categorias" [value]="item.id">{{ item.nombre }}</mat-option>
          </mat-select>
          <mat-error *ngIf="frmValidationUtils?.hasErrors('categoria')"
            [innerHtml]="frmValidationUtils.getErrorMessages('categoria', 'Categoría')"></mat-error>
        </mat-form-field>

        <div class="w-full md:w-5/6 md:pl-5">
          <mat-form-field class="w-full">
            <mat-label>Filtrar producto </mat-label>
            <input matInput type="text" formControlName="filter" (keyup)="onClickBuscar()" />
            <mat-error *ngIf="frmValidationUtils?.hasErrors('filter')" [innerHtml]="
              frmValidationUtils.getErrorMessages(
                'filter',
                'Ingrese algún valor a buscar'
              )
            "></mat-error>
          </mat-form-field>
        </div>
      </form>
    </div>

    <!-- Tabla -->

  </div>

  <div class="flex">
    <div class="w-full md:w-1/6"></div>
    <div class="w-full md:w-5/6">
      <div class="pl-5">
        <div class="overflow-auto pb-3">
          <div class="flex flex-wrap">

            <div class="w-full sm:w-1/2 md:w-1/3 p-1" *ngFor="let item of pagina">
              <mat-card class="h-full !bg-white">
                <div class="flex justify-center p-1 border rounded-t-lg">
                  <img class="max-h-50" matCardImage [src]="item.url" alt="{{ item.nombre }}">
                </div>
                <mat-card-content class="h-full !pt-4">
                  {{ item.nombre }}
                  <div class="text-sm text-c_success">{{ item.categoria?.nombre }}</div>
                  <p class="text-sm">{{ item.descripcion }}</p>
                  <p class="text-sm text-c_secondary">{{ item.stock }} unidad(es)</p>
                </mat-card-content>
                <mat-card-actions>
                  <div class="w-full flex justify-between items-center" *ngIf="item.stock > 0">
                    <div class="flex items-center">
                      <button class="!bg-gray-200 hover:!scale-105 !rounded-full !p-1 !flex" mat-icon-button
                        (click)="onClickMenos(item)">
                        <mat-icon class="icon-size-5">remove</mat-icon>
                      </button>

                      <div class="ms-2 me-2 text-center">
                        <label class="w-10 bg-white p-1.5 text-center rounded">{{ item.cantidad ?? 0 }}</label>
                      </div>

                      <button class="!bg-gray-200 hover:!scale-105 !rounded-full !p-1 !flex" mat-icon-button
                        (click)="onClickMas(item)">
                        <mat-icon class="icon-size-5">add</mat-icon>
                      </button>
                    </div>

                    <div *ngIf="item?.cantidad > 0">
                      <button class="!bg-c_success hover:!scale-105 !text-white" mat-raised-button
                        (click)="onClickAgregarCarrito(item)">
                        <mat-icon>shopping_cart</mat-icon> Agregar
                      </button>
                    </div>
                  </div>

                  <div class="w-full text-md text-orange-700 text-center" *ngIf="item.stock == 0">
                    No hay Stock
                  </div>
                </mat-card-actions>
              </mat-card>
            </div>
          </div>
        </div>

        <mat-paginator [length]="totalItems" [pageSize]="pageSize" [pageSizeOptions]="[3, 6, 12, 24]"
          (page)="onPageChange($event)">
        </mat-paginator>
      </div>
    </div>
  </div>

</div>
